ssr, csr 차이를 정의하고 이해하기

* SSR
    - Server Side Rendering
    - 서버쪽에서 렌더링 준비를 끝마친 상태로 클라이언트에 전달하는 방식
    - 페이지를 이동할 때마다 서버에 요청을 하는 방식

* SSR의 단계
    1. User가 Website 요청을 보냄.
    2. Server는 'Ready to Render'. 즉, 즉시 렌더링 가능한 html파일을 만든다.(리소스 체크, 컴파일 후 완성된 HTML 컨텐츠로 만든다.)
    3. 클라이언트에 전달되는 순간, 이미 렌더링 준비가 되어있기 때문에 HTML은 즉시 렌더링 된다. 그러나 사이트 자체는 조작 불가능하다. (Javascript가 읽히기 전이다.)
    4. 클라이언트가 자바스크립트를 다운받는다.
    5. 다운 받아지고 있는 사이에 유저는 컨텐츠는 볼 수 있지만 사이트를 조작 할 수는 없다. 이때의 사용자 조작을 기억하고 있는다.
    6. 브라우저가 Javascript 프레임워크를 실행한다.
    7. JS까지 성공적으로 컴파일 되었기 때문에 기억하고 있던 사용자 조작이 실행되고 이제 웹 페이지는 상호작용 가능해진다.

* SSR의 장,단점
    - 장점 : 
        - 초기 로딩 속도가 빨라 사용자가 빠르게 컨텐츠를 볼 수 있다.
        - HTML에 대한 정보가 처음부터 포함되어 있어서 모든 검색 엔진에 대한 SEO(검색엔진 최적화)가 가능하다.
        - 동적 컨텐츠가 포함된 페이지를 만들 때 사용가능하다.
    - 단점 :
        - 매번 페이지를 요청할 때마다 새로고침 되기 때문에 UX(사용자 경험)가 다소 떨어진다.
        - 페이지를 이동할 때마다 매번 서버에 요청을 하기 때문에 서버의 부하가 커진다.
        - 공격할 요소가 많기 때문에 보안 유지가 어려울 수 있다.

* SSR은 언제 사용하는가?
컨텐츠가 매우 자주 변경되고 SEO에 많이 의존하는 사이트에서 사용
ex) 주식 시세 사이트


-----------


* CSR
    - Client Side Rendering
    - 최초 로딩 시 브라우저가 서버에 HTML, CSS, JS 등 각 리소스들을 받아오는 방식
    - 렌더링이 클라이언트 쪽에서 일어나는 방식. 서버는 요청을 받으면 클라이언트에 HTML, CSS, JS를 보내주고 클라이언트는 그것을 받아 렌더링을 시작하는 한다.
    - 모든 로직, 데이터 패칭, 템플릿화, 라우팅을 서버가 아닌 클라이언트에서 처리한다.

* CSR의 단계
    1. User가 Website 요청을 보냄.
    2. CDN이 HTML 파일과 JS로 접근할 수 있는 링크를 클라이언트로 보낸다.
    * CDN : aws의 cloudflare를 생각하면 됨. 엔드 유저의 요청에 '물리적'으로 가까운 서버에서 요청에 응답하는 방식
    3. 클라이언트는 HTML과 JS를 다운로드 받는다.
    (이때 SSR과 달리 유저는 아무것도 볼 수 없다.)
    4. 생략
    5. 다운이 완료된 JS가 실행된다. 데이터를 위한 API가 호출된다.
    (이때 유저들은 placeholder를 보게된다. )
    6. 서버가 API로부터의 요청에 응답한다.
    7. API로부터 받아온 data를 placeholder 자리에 넣어준다. 이제 페이지는 상호작용이 가능해진다.

* CSR의 장,단점
    - 장점 : 
        - 초기 요청을 제외하고는 SSR에 비해 빠른 페이지 전환 속도로 더 나은 UX를 제공한다.
        - 서버에 요청하는 횟수가 적기 때문에 서버 부담이 SSR에 비해 적다.
    - 단점 :
        - 최초 로딩 시 모든 리소스들을 받아와야 하기 때문에 초기 로딩 속도가 느리다.
        - 처음에는 HTML이 비어있어 크롤러가 데이터를 수집할 수 없기 때문에 SEO(검색 엔진 최적화) 문제가 발생한다.
        - 쿠키나 localStorage에서 사용자에 대한 정보를 저장해야 하기 때문에 XSS 공격에 취약하다.

* CSR은 언제 사용하는가?
이상적으로 SEO에 의존적이지 않는 사이트에 사용해야 한다.



참고
- https://velog.io/@vagabondms/%EA%B8%B0%EC%88%A0-%EC%8A%A4%ED%84%B0%EB%94%94-SSR%EA%B3%BC-CSR%EC%9D%98-%EC%B0%A8%EC%9D%B4
- https://bbbyung2.tistory.com/65
- https://heeeming.tistory.com/entry/%EB%B2%88%EC%97%AD-%ED%94%84%EB%A1%A0%ED%8A%B8%EC%97%94%EB%93%9C-%EB%A0%8C%EB%8D%94%EB%A7%81-SSG-vs-ISG-vs-SSR-vs-CSR-%EC%96%B8%EC%A0%9C-%EC%96%B4%EB%96%A4-%EA%B2%83%EC%9D%84-%EC%82%AC%EC%9A%A9%ED%95%B4%EC%95%BC-%ED%95%A0%EA%B9%8C%EC%9A%94